USAGE
=====
> At this point you must have Godot 3.2 compiled along  with `gd_rules` module

1.  Open Godot editor, and add `CLIPS.gd` to the autoload list: `Project -> Project Settings -> AutoLoad` then enable it as a GDscript singleton.

2.  In the `node's_script.gd` of Node which you want to be controlled/watched by CLIPS rules:

    -   specify custom `class_name` and override `get_class()` and
        `_to_stirng()` methods: 
        ```
        class_name Enemy   
        func get_class(): return 'Enemy'
        func _to_string()->String: return '[%s:%s]' % [get_class(), get_instance_id()]
        ```

    -   use both GDscript keywords `export` and `setget` on Node's property that you  want to be projected to CLIPS environment, and specify what will  trigger rule system
        
		``` 
        export var hitpoints = 3 setget set_hitpoints 
        export var items = ['sword', 'potion'] setget set_items

        func set_hitpoints(new): 
            hitpoints = new 
            # next will trigger pattern-matching proces 
            # and activations of rules that match this property 
            CLIPS.set_slot(to_string(),'hitpoints', new)

        func set_items(new:Array): 
            items = new 
            # next will trigger pattern-matching proces
            # and activations of rules that match this property 
            CLIPS.set_slot(to_string(),'items', new) 
        ```

    -   in Node's `_init()` method call `CLIPS.make_instance(self)` 
        ```
        func _init() -> void:
            CLIPS.make_instance(self)`
        ```
    -   to get all the mess cleaned when we finished and to show the respect to Godot's memory manager we are going to delete CLIPS instance as soon as the gd Node trashed:
        ```
        func _notification(what):
            match what:
                NOTIFICATION_PREDELETE:
                    CLIPS.del_instance(self)
        ```
    -   refer to  [CLIPS v.6.31 syntax](http://www.clipsrules.net/Documentation.html) to start writing your rules

    -   rules system will be  loaded automatically when `CLIPS.make_instance(gd_node)` is called for the first time, by either:

        -   Node script's `get_rules()->Array`(of Strings)

        -   `res://rules/class_name.clp` (e.g. `res://rules/Enemy.clp`)

3.  To check how Node's guts is projected onto CLIPS Environment:
    `CLIPS.print_clp_instance(gd_node)`

4.  To pull the trigger call `CLIPS.run()` method everywhere you need reasoning over current situation.

Further reading
===============

1.  [CLIPS v.6.31 documentation](http://www.clipsrules.net/Documentation.html)

3. `EXAMPLES.md` file

2.  Code annotations in `CLIPS.gd` file
